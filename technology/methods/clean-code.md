## 代码整洁之道

### 第6章 对象和数据结构
过程式代码便于在不改动原有数据结构的前提下添加新函数，面向对象代码便于在不该动既有函数的前提下添加新类。  
模块不应了解它所操作的对象的内部情形，对象隐藏数据，暴露操作。

### 第7章 错误处理
遇到错误时，最好是抛出异常而不是返回错误码。如果是返回错误码，调用方需要写很多异常处理逻辑。  
先写try-catch-finally语句。  
抛出异常时，提供足够的环境说明，以便判断错误的来源。如果应用中有日志系统，传递足够的信息给catch块，并记录下来。  
常规流程不要写在异常处理中。  
不要返回null值，否则调用方需要不停的判空。

### 第8章 边界
在使用第三方代码时，我们必须加倍小心，确保未来的修改不至于代价太大。  
避免我们的代码中过多的了解第三方代码中的特定信息。

### 第9章 单元测试

**TDD三定律**  
1. 在编写不能通过的单元测试之前，不可编写生产代码
2. 只可编写刚好无法通过的单元测试，不能编译也不算通过
3. 只编写刚好足以通过当前失败测试的生产代码

**保持测试整洁**

单元测试让代码可扩展、可维护、可复用

### 第10章 类
类应该短小，类的名称应该描述其权责。

**单一权责原则**

系统应该由许多短小的类而不是少量巨大的类组成。每个小类封装一个权责，只有一个修改的原因，并与少数其他类一起协同达成期望的系统行为。  

每个达到一定规模的系统都会包括大量的逻辑和复杂性。管理这种复杂性的首要目标就是加以组织，以便开发者知道在哪能找到东西，并且在某个特定时间只需要理解直接有关的复杂性。

**内聚**


### 第11章 系统
软件系统应将启动过程和启动过程之后的运行时逻辑分离开，在启动过程中构建应用对象。

将构造和使用分开的方法之一是将全部构造过程搬迁至main或者被称之为卖弄的模块中，设计系统的其余部分，假设所有对象都已正确构造和设置。  
main函数创建系统所需的对象，再传递给应用程序，应用程序只管使用。

**AOP，面向方面编程**  

将关注面恰当切分。

### 第12章 迭进
简单设计四条规则  

* 运行所有测试
* 不可重复
* 表达程序员的意图
* 尽可能减少类和方法的数量

运行所有测试：  
全面测试并持续通过所有测试的系统。不可测试的系统同样不可验证。不可验证的系统不应部署。  
只要系统可测试，就会导向保持类短小且目的单一的设计方案。

重构：  
提升内聚性，降低耦合度，切分关注面，模块化系统性关注面，缩小函数和类的尺寸，选用更好的名称，编写良好的单元测试，函数和类的数量要少。

表达力：  

